{"version":3,"file":"0.plugin.js","sources":["/plugin:ezreporting/plugins/ezreporting/lib/reporting.tsx","/plugin:ezreporting/plugins/ezreporting/public/application.tsx","/plugin:ezreporting/plugins/ezreporting/public/components/app.tsx","/plugin:ezreporting/plugins/ezreporting/public/components/flyout/edit.tsx","/plugin:ezreporting/plugins/ezreporting/public/components/flyout/history.tsx","/plugin:ezreporting/plugins/ezreporting/public/components/table.tsx"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setHttpClient = setHttpClient;\nexports.setToasts = setToasts;\nexports.setCapabilities = setCapabilities;\nexports.capabilities = exports.toasts = exports.httpClient = exports.ms2Str = exports.defaultTask = exports.convertFrequency = void 0;\n\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nconst convertFrequency = (frequencies, frequency) => {\n  const freq = frequencies.find(({\n    value\n  }) => value === frequency);\n  return freq ? freq.text : 'Error';\n};\n\nexports.convertFrequency = convertFrequency;\n\nconst defaultTask = dashboardId => ({\n  _id: '',\n  dashboardId: dashboardId || null,\n  exists: true,\n  reporting: {\n    frequency: '1w',\n    emails: [],\n    createdAt: '',\n    print: false\n  }\n});\n\nexports.defaultTask = defaultTask;\n\nconst ms2Str = time => {\n  let ms = time;\n  let s = Math.floor(ms / 1000);\n  ms %= 1000;\n  let m = Math.floor(s / 60);\n  s %= 60;\n  const h = Math.floor(m / 60);\n  m %= 60;\n\n  if (h) {\n    return `${h}h ${m}m`;\n  }\n\n  if (m) {\n    return `${m}m ${s}s`;\n  }\n\n  if (s) {\n    return `${s}s`;\n  }\n\n  return `${ms}ms`;\n};\n\nexports.ms2Str = ms2Str;\nlet httpClient;\nexports.httpClient = httpClient;\n\nfunction setHttpClient(http) {\n  exports.httpClient = httpClient = http;\n}\n\nlet toasts;\nexports.toasts = toasts;\n\nfunction setToasts(notifications) {\n  exports.toasts = toasts = notifications;\n}\n\nlet capabilities;\nexports.capabilities = capabilities;\n\nfunction setCapabilities(capa) {\n  exports.capabilities = capabilities = capa.ezreporting || {};\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderApp = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _app = require(\"./components/app\");\n\nvar _reporting = require(\"../lib/reporting\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nconst renderApp = ({\n  application,\n  notifications,\n  http\n}, {\n  navigation\n}, {\n  appBasePath,\n  element\n}) => {\n  if (!_reporting.httpClient) {\n    (0, _reporting.setHttpClient)(http);\n  }\n\n  if (!_reporting.toasts) {\n    (0, _reporting.setToasts)(notifications.toasts);\n  }\n\n  if (!_reporting.capabilities) {\n    (0, _reporting.setCapabilities)(application.capabilities);\n  }\n\n  _reactDom.default.render( /*#__PURE__*/_react.default.createElement(_app.EzreportingApp, {\n    basename: appBasePath,\n    navigation: navigation\n  }), element);\n\n  return () => _reactDom.default.unmountComponentAtNode(element);\n};\n\nexports.renderApp = renderApp;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EzreportingApp = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _react2 = require(\"@kbn/i18n/react\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _eui = require(\"@elastic/eui\");\n\nvar _common = require(\"../../common\");\n\nvar _table = require(\"./table\");\n\nvar _edit = require(\"./flyout/edit\");\n\nvar _history = require(\"./flyout/history\");\n\nvar _reporting = require(\"../../lib/reporting\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass EzreportingApp extends _react.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      _reporting.httpClient.get('/api/ezreporting/tasks').then(res => {\n        this.setState({\n          tasks: res.tasks,\n          dashboards: res.dashboards,\n          frequencies: res.frequencies,\n          reportingName: res.reportingName\n        });\n      }).catch(err => {\n        if (err.code === 403) {\n          this.setState({\n            accessDenied: true\n          });\n        }\n\n        return _reporting.toasts.addDanger({\n          title: 'Error',\n          text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n            id: \"ezReporting.errorOccured\",\n            defaultMessage: \"An error occurred while loading the data.\"\n          })\n        });\n      });\n    });\n\n    _defineProperty(this, \"editTaskHandler\", task => {\n      if (_reporting.capabilities.edit) {\n        const body = JSON.stringify({\n          dashboardId: task.dashboardId,\n          frequency: task.reporting.frequency,\n          emails: task.reporting.emails,\n          print: task.reporting.print\n        });\n        return _reporting.httpClient.patch(`/api/ezreporting/tasks/${task._id}`, {\n          body\n        }).then(() => {\n          const index = this.state.tasks.findIndex(({\n            _id\n          }) => _id === task._id);\n          const tasks = this.state.tasks;\n          tasks[index] = task;\n          this.setState({\n            tasks\n          });\n\n          _reporting.toasts.addSuccess({\n            title: 'Success',\n            text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n              id: \"ezReporting.editingSuccess\",\n              defaultMessage: \"Task edited successfully.\"\n            })\n          });\n\n          (0, _edit.closeFlyOut)();\n          this.forceUpdate();\n        });\n      }\n    });\n\n    _defineProperty(this, \"saveTaskHandler\", task => {\n      if (_reporting.capabilities.save) {\n        const tasks = this.state.tasks;\n        const body = JSON.stringify({\n          dashboardId: task.dashboardId,\n          frequency: task.reporting.frequency,\n          emails: task.reporting.emails,\n          print: task.reporting.print\n        });\n        return _reporting.httpClient.post('/api/ezreporting/tasks', {\n          body\n        }).then(res => {\n          task._id = res._id;\n          task.reporting.createdAt = res.createdAt;\n          tasks.push(task);\n          this.setState({\n            tasks\n          });\n\n          _reporting.toasts.addSuccess({\n            title: 'Success',\n            text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n              id: \"ezreporting.editingSuccess\",\n              defaultMessage: \"Task edited successfully.\"\n            })\n          });\n\n          (0, _edit.closeFlyOut)();\n          this.forceUpdate();\n        });\n      }\n    });\n\n    _defineProperty(this, \"removeTaskHandler\", task => {\n      if (_reporting.capabilities.delete) {\n        if (task) {\n          _reporting.httpClient.delete(`/api/ezreporting/tasks/${task._id}`).then(() => {\n            const tasks = this.state.tasks.filter(({\n              _id\n            }) => _id !== task._id);\n            this.setState({\n              tasks\n            });\n\n            _reporting.toasts.addSuccess({\n              title: 'Success',\n              text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n                id: \"ezReporting.removalSuccess\",\n                defaultMessage: \"Task removed successfully.\"\n              })\n            });\n\n            this.forceUpdate();\n          }).catch(() => {\n            _reporting.toasts.addDanger({\n              title: 'Error',\n              text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n                id: \"ezReporting.removalError\",\n                defaultMessage: \"An error occurred during the removal of the task.\"\n              })\n            });\n          });\n        }\n\n        if (!task._id) {\n          _reporting.toasts.addDanger({\n            title: 'Error',\n            text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n              id: \"ezReporting.removalError\",\n              defaultMessage: \"An error occurred during the removal of the task.\"\n            })\n          });\n        }\n      }\n    });\n\n    _defineProperty(this, \"downloadReport\", taskId => {\n      if (_reporting.capabilities.save && taskId) {\n        return _reporting.httpClient.get(`/api/ezreporting/tasks/${taskId}/download`);\n      }\n    });\n\n    this.state = {\n      tasks: [],\n      dashboards: [],\n      frequencies: [],\n      reportingName: 'Reporting',\n      accessDenied: false\n    };\n  }\n\n  render() {\n    const {\n      basename,\n      navigation\n    } = this.props;\n    const {\n      tasks,\n      dashboards,\n      frequencies,\n      reportingName,\n      accessDenied\n    } = this.state;\n\n    if (accessDenied) {\n      const defaultMsg = `\n        You are not authorized to access Reporting.\n        To use Reporting management, you need the privileges granted by the \\`reporting\\` role.\n      `;\n      return /*#__PURE__*/_react.default.createElement(_eui.EuiEmptyPrompt, {\n        iconType: \"reportingApp\",\n        title: /*#__PURE__*/_react.default.createElement(\"h2\", null, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n          id: \"ezReporting.accessDeniedTitle\",\n          defaultMessage: \"Access denied\"\n        })),\n        body: /*#__PURE__*/_react.default.createElement(_react.Fragment, null, /*#__PURE__*/_react.default.createElement(\"p\", null, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n          id: \"ezReporting.accessDenied\",\n          defaultMessage: defaultMsg\n        }), \",\"))\n      });\n    }\n\n    return /*#__PURE__*/_react.default.createElement(_reactRouterDom.BrowserRouter, {\n      basename: basename\n    }, /*#__PURE__*/_react.default.createElement(_edit.EzreportingTaskEditFlyout, {\n      dashboards: dashboards,\n      frequencies: frequencies,\n      editTaskHandler: this.editTaskHandler,\n      saveTaskHandler: this.saveTaskHandler\n    }), /*#__PURE__*/_react.default.createElement(_history.EzreportingHistoryFlyout, null), /*#__PURE__*/_react.default.createElement(_react2.I18nProvider, null, /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(navigation.ui.TopNavMenu, {\n      appName: _common.PLUGIN_ID,\n      showSearchBar: false\n    }), /*#__PURE__*/_react.default.createElement(_eui.EuiPage, {\n      restrictWidth: \"1000px\"\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiPageBody, null, /*#__PURE__*/_react.default.createElement(_eui.EuiPageContent, null, /*#__PURE__*/_react.default.createElement(_eui.EuiPageContentHeader, null, /*#__PURE__*/_react.default.createElement(_eui.EuiPageContentHeaderSection, null, /*#__PURE__*/_react.default.createElement(_eui.EuiTitle, null, /*#__PURE__*/_react.default.createElement(\"h2\", null, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n      id: \"ezreporting.title\",\n      defaultMessage: \"{name}\",\n      values: {\n        name: `${_common.PLUGIN_NAME} ${_common.PLUGIN_APP_NAME}`\n      }\n    })))), /*#__PURE__*/_react.default.createElement(_eui.EuiPageContentHeaderSection, null, /*#__PURE__*/_react.default.createElement(_eui.EuiButton, {\n      fill: true,\n      iconType: \"plusInCircle\",\n      isDisabled: dashboards.length > 0 ? false : true,\n      onClick: () => dashboards.length > 0 ? (0, _edit.openFlyOut)(null, false) : null\n    }, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n      id: \"ezreporting.createNewTask\",\n      defaultMessage: \"New reporting task\"\n    })))), /*#__PURE__*/_react.default.createElement(_eui.EuiPageContentBody, null, /*#__PURE__*/_react.default.createElement(_table.EzreportingTable, {\n      tasks: tasks,\n      dashboards: dashboards,\n      frequencies: frequencies,\n      removeTaskHandler: this.removeTaskHandler,\n      downloadReport: this.downloadReport\n    }))))))));\n  }\n\n}\n\nexports.EzreportingApp = EzreportingApp;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.openFlyOut = openFlyOut;\nexports.closeFlyOut = closeFlyOut;\nexports.EzreportingTaskEditFlyout = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _eui = require(\"@elastic/eui\");\n\nvar _lodash = require(\"lodash\");\n\nvar _react2 = require(\"@kbn/i18n/react\");\n\nvar _i18n = require(\"@kbn/i18n\");\n\nvar _reporting = require(\"../../../lib/reporting\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nlet openFlyOutHandler;\n\nfunction openFlyOut(dashboard, edit) {\n  openFlyOutHandler(dashboard, edit);\n}\n\nlet closeFlyOutHandler;\n\nfunction closeFlyOut() {\n  closeFlyOutHandler();\n}\n\nclass EzreportingTaskEditFlyout extends _react.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"open\", (dashboard, edit) => {\n      const currentTask = JSON.parse(JSON.stringify(dashboard || (0, _reporting.defaultTask)(this.props.dashboards[0].id)));\n      const currentFrequency = (0, _lodash.get)(currentTask, 'reporting.frequency');\n      const frequency = this.props.frequencies.find(f => f.value === currentFrequency);\n      let receivers = (0, _lodash.get)(currentTask, 'reporting.emails', []);\n\n      if (typeof receivers === 'string') {\n        receivers = receivers.split(',').map(e => e.trim());\n      }\n\n      if (!frequency && this.props.frequencies.length > 0) {\n        // If the task frequency doesn't exist anymore, auto-select first frequency\n        (0, _lodash.set)(currentTask, 'reporting.frequency', this.props.frequencies[0].value);\n      }\n\n      this.setState({\n        isFlyoutVisible: true,\n        currentTask,\n        edit,\n        receivers,\n        email: '',\n        mailErrorMessages: [],\n        dashboardErrorMessages: []\n      });\n    });\n\n    _defineProperty(this, \"close\", () => {\n      this.setState({\n        isFlyoutVisible: false\n      });\n    });\n\n    _defineProperty(this, \"onChangeDashboard\", selectedDashboards => {\n      const dashboard = selectedDashboards[0];\n      const currentTask = { ...this.state.currentTask\n      };\n      currentTask.dashboardId = dashboard && dashboard.value;\n      const dashboardErrorMessages = [];\n\n      if (!currentTask.dashboardId) {\n        dashboardErrorMessages.push(_i18n.i18n.translate('ezReporting.pleaseSelectDashboard', {\n          defaultMessage: 'Please select a dashboard'\n        }));\n      }\n\n      this.setState({\n        currentTask,\n        dashboardErrorMessages\n      });\n    });\n\n    _defineProperty(this, \"onChangeFrequency\", event => {\n      const currentTask = { ...this.state.currentTask\n      };\n      currentTask.reporting.frequency = event.target.value;\n      this.setState({\n        currentTask\n      });\n    });\n\n    _defineProperty(this, \"onChangeEmail\", event => {\n      this.setState({\n        email: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"onChangeLayout\", event => {\n      const currentTask = { ...this.state.currentTask\n      };\n      currentTask.reporting.print = event.target.checked;\n      this.setState({\n        currentTask\n      });\n    });\n\n    _defineProperty(this, \"addReceiver\", async event => {\n      event.preventDefault();\n      const {\n        email,\n        receivers\n      } = this.state;\n\n      try {\n        const body = JSON.stringify({\n          email\n        });\n        const resp = await _reporting.httpClient.post('/api/ezreporting/email', {\n          body\n        });\n        const exists = receivers.includes(email);\n        this.setState({\n          email: '',\n          mailErrorMessages: [],\n          receivers: exists ? receivers : receivers.concat([email])\n        });\n      } catch (error) {\n        this.setState({\n          mailErrorMessages: [_i18n.i18n.translate('ezReporting.pleaseEnterValidEmail', {\n            defaultMessage: 'Please enter a valid email address'\n          })]\n        });\n      }\n    });\n\n    _defineProperty(this, \"removeReceiver\", email => {\n      this.setState({\n        receivers: this.state.receivers.filter(r => r !== email)\n      });\n    });\n\n    _defineProperty(this, \"saveOrUpdate\", () => {\n      if (_reporting.capabilities.save) {\n        const {\n          edit,\n          currentTask,\n          receivers\n        } = this.state;\n        (0, _lodash.set)(currentTask, 'reporting.emails', receivers);\n\n        if (edit) {\n          return this.props.editTaskHandler(currentTask).catch(err => _reporting.toasts.addDanger({\n            title: 'Error',\n            text: (0, _lodash.get)(err, 'data.error', 'Error')\n          }));\n        }\n\n        return this.props.saveTaskHandler(currentTask).catch(err => _reporting.toasts.addDanger({\n          title: 'Error',\n          text: (0, _lodash.get)(err, 'data.error', 'Error')\n        }));\n      }\n    });\n\n    this.state = {\n      isFlyoutVisible: false,\n      edit: false,\n      currentTask: null,\n      email: '',\n      receivers: [],\n      mailErrorMessages: [],\n      dashboardErrorMessages: []\n    };\n    openFlyOutHandler = this.open;\n    closeFlyOutHandler = this.close;\n  }\n\n  render() {\n    const {\n      isFlyoutVisible,\n      currentTask,\n      edit,\n      mailErrorMessages,\n      dashboardErrorMessages,\n      receivers\n    } = this.state;\n    const {\n      dashboards,\n      frequencies\n    } = this.props;\n\n    const flytOut = /*#__PURE__*/_react.default.createElement(_eui.EuiFlyout, {\n      onClose: this.close,\n      size: \"m\"\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFlyoutHeader, {\n      hasBorder: true\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFlexGroup, {\n      alignItems: \"center\"\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFlexItem, null, /*#__PURE__*/_react.default.createElement(_eui.EuiTitle, {\n      size: \"s\"\n    }, /*#__PURE__*/_react.default.createElement(\"h3\", {\n      id: \"flyoutTitle\"\n    }, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n      defaultMessage: \"Log event document details\",\n      id: \"xpack.infra.logFlyout.flyoutTitle\"\n    })))), /*#__PURE__*/_react.default.createElement(_eui.EuiFlexItem, {\n      grow: false\n    }, \"lortem\"))), /*#__PURE__*/_react.default.createElement(_eui.EuiFlyoutBody, null, \"lorem\"));\n\n    const dashboardList = dashboards.map(dashboard => ({\n      value: dashboard.id,\n      label: dashboard.name\n    }));\n    const invalidMail = mailErrorMessages.length > 0;\n    const invalidDashboard = dashboardErrorMessages.length > 0;\n    const invalidForm = invalidDashboard || receivers.length === 0;\n    let saveBtn;\n\n    if (_reporting.capabilities.save) {\n      saveBtn = /*#__PURE__*/_react.default.createElement(_eui.EuiFormRow, {\n        fullWidth: true\n      }, /*#__PURE__*/_react.default.createElement(_eui.EuiButton, {\n        fill: true,\n        iconType: \"save\",\n        type: \"submit\",\n        onClick: () => this.saveOrUpdate(),\n        disabled: invalidForm,\n        fullWidth: true\n      }, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n        id: \"ezReporting.save\",\n        defaultMessage: \"Save\"\n      })));\n    }\n\n    if (!isFlyoutVisible) {\n      return /*#__PURE__*/_react.default.createElement(_react.Fragment, null);\n    }\n\n    let title;\n\n    if (edit) {\n      title = /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n        id: \"ezReporting.editingTask\",\n        defaultMessage: \"Editing a reporting task\"\n      });\n    } else {\n      title = /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n        id: \"ezReporting.creatingTask\",\n        defaultMessage: \"Creating a reporting task\"\n      });\n    }\n\n    const receiverItems = receivers.map((email, index) => /*#__PURE__*/_react.default.createElement(_eui.EuiListGroupItem, {\n      key: index,\n      label: email,\n      extraAction: {\n        iconType: 'trash',\n        iconSize: 's',\n        'aria-label': `remove receiver ${email}`,\n        onClick: () => {\n          this.removeReceiver(email);\n        }\n      }\n    }));\n    let receiversList;\n\n    if (receiverItems.length > 0) {\n      receiversList = /*#__PURE__*/_react.default.createElement(_eui.EuiFormRow, {\n        fullWidth: true\n      }, /*#__PURE__*/_react.default.createElement(_eui.EuiListGroup, {\n        maxWidth: false,\n        bordered: true\n      }, receiverItems));\n    }\n\n    const selectedDashboards = dashboardList.filter(d => d.value === currentTask.dashboardId);\n\n    const flyOutContent = /*#__PURE__*/_react.default.createElement(_eui.EuiForm, null, /*#__PURE__*/_react.default.createElement(_eui.EuiFormRow, {\n      fullWidth: true,\n      label: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n        id: \"ezReporting.dashboard\",\n        defaultMessage: \"Dashboard\"\n      }),\n      isInvalid: invalidDashboard,\n      error: dashboardErrorMessages\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiComboBox, {\n      fullWidth: true,\n      placeholder: _i18n.i18n.translate('ezReporting.selectDashboard', {\n        defaultMessage: 'Select a dashboard'\n      }),\n      singleSelection: {\n        asPlainText: true\n      },\n      options: dashboardList,\n      selectedOptions: selectedDashboards,\n      onChange: this.onChangeDashboard,\n      isClearable: true,\n      isInvalid: invalidDashboard\n    })), /*#__PURE__*/_react.default.createElement(_eui.EuiFormRow, {\n      fullWidth: true,\n      label: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n        id: \"ezReporting.frequency\",\n        defaultMessage: \"Frequency\"\n      })\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiSelect, {\n      fullWidth: true,\n      options: frequencies,\n      value: currentTask.reporting.frequency,\n      \"aria-label\": /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n        id: \"ezReporting.frequency\",\n        defaultMessage: \"Frequency\"\n      }),\n      onChange: this.onChangeFrequency\n    })), /*#__PURE__*/_react.default.createElement(_eui.EuiSpacer, {\n      size: \"m\"\n    }), /*#__PURE__*/_react.default.createElement(\"form\", {\n      onSubmit: this.addReceiver\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFlexGroup, null, /*#__PURE__*/_react.default.createElement(_eui.EuiFlexItem, null, /*#__PURE__*/_react.default.createElement(_eui.EuiFormRow, {\n      label: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n        id: \"ezReporting.receiversEmails\",\n        defaultMessage: \"Receivers' email addresses\"\n      }),\n      fullWidth: true,\n      isInvalid: invalidMail,\n      error: mailErrorMessages\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFieldText, {\n      fullWidth: true,\n      placeholder: \"Email\",\n      value: this.state.email,\n      onChange: this.onChangeEmail\n    }))), /*#__PURE__*/_react.default.createElement(_eui.EuiFlexItem, {\n      grow: false\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFormRow, {\n      hasEmptyLabelSpace: true\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiButton, {\n      iconType: \"plusInCircle\",\n      type: \"submit\"\n    }, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n      id: \"ezReporting.add\",\n      defaultMessage: \"Add\"\n    })))))), /*#__PURE__*/_react.default.createElement(_eui.EuiSpacer, {\n      size: \"m\"\n    }), receiversList, /*#__PURE__*/_react.default.createElement(_eui.EuiFormRow, {\n      fullWidth: true\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiCheckbox, {\n      id: \"optimize-checkbox\",\n      checked: currentTask.reporting.print,\n      label: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n        id: \"ezReporting.optimizedForPrinting\",\n        defaultMessage: \"Optimized for printing\"\n      }),\n      onChange: this.onChangeLayout\n    })), saveBtn);\n\n    return /*#__PURE__*/_react.default.createElement(_eui.EuiFlyout, {\n      onClose: this.close,\n      size: \"m\",\n      \"aria-labelledby\": \"flyoutSmallTitle\"\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFlyoutHeader, {\n      hasBorder: true\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiTitle, {\n      size: \"m\"\n    }, /*#__PURE__*/_react.default.createElement(\"h2\", null, title))), /*#__PURE__*/_react.default.createElement(_eui.EuiFlyoutBody, null, flyOutContent));\n  }\n\n}\n\nexports.EzreportingTaskEditFlyout = EzreportingTaskEditFlyout;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.openFlyOut = openFlyOut;\nexports.closeFlyOut = closeFlyOut;\nexports.EzreportingHistoryFlyout = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _eui = require(\"@elastic/eui\");\n\nvar _react2 = require(\"@kbn/i18n/react\");\n\nvar _i18n = require(\"@kbn/i18n\");\n\nvar _reporting = require(\"../../../lib/reporting\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nlet openFlyOutHandler;\n\nfunction openFlyOut(dashboard, edit) {\n  openFlyOutHandler(dashboard, edit);\n}\n\nlet closeFlyOutHandler;\n\nfunction closeFlyOut() {\n  closeFlyOutHandler();\n}\n\nclass EzreportingHistoryFlyout extends _react.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"showDetails\", historyItem => {\n      const expandedRows = { ...this.state.expandedRows\n      };\n      const {\n        logs = []\n      } = historyItem;\n      const columns = [{\n        field: 'date',\n        name: _i18n.i18n.translate('ezReporting.date', {\n          defaultMessage: 'Date'\n        }),\n        align: 'left',\n        dataType: 'date',\n        width: '180px'\n      }, {\n        field: 'type',\n        name: _i18n.i18n.translate('ezReporting.type', {\n          defaultMessage: 'Type'\n        }),\n        width: '80px',\n        render: type => {\n          const colors = {\n            error: 'danger',\n            info: 'primary',\n            warn: 'warning'\n          };\n          return /*#__PURE__*/_react.default.createElement(_eui.EuiBadge, {\n            color: colors[type] || 'hollow'\n          }, type);\n        }\n      }, {\n        field: 'message',\n        name: _i18n.i18n.translate('ezReporting.message', {\n          defaultMessage: 'Message'\n        }),\n        align: 'left'\n      }];\n      expandedRows[historyItem.id] = /*#__PURE__*/_react.default.createElement(_react.Fragment, null, /*#__PURE__*/_react.default.createElement(_eui.EuiBasicTable, {\n        items: logs,\n        columns: columns\n      }));\n      this.setState({\n        expandedRows\n      });\n    });\n\n    _defineProperty(this, \"hideDetails\", historyId => {\n      const expandedRows = { ...this.state.expandedRows\n      };\n      delete expandedRows[historyId];\n      this.setState({\n        expandedRows\n      });\n    });\n\n    _defineProperty(this, \"toggleDetails\", historyItem => {\n      const rowsExpanded = { ...this.state.expandedRows\n      };\n\n      if (rowsExpanded[historyItem.id]) {\n        this.hideDetails(historyItem.id);\n      } else {\n        this.showDetails(historyItem);\n      }\n    });\n\n    _defineProperty(this, \"refresh\", async () => {\n      const {\n        taskId,\n        expandedRows\n      } = this.state;\n      this.setState({\n        refreshing: true\n      });\n      let historyItems;\n\n      try {\n        const resp = await _reporting.httpClient.get(`/api/ezreporting/tasks/${taskId}/history`);\n        historyItems = resp;\n      } catch (e) {\n        _reporting.toasts.addDanger({\n          title: 'Error',\n          text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n            id: \"ezReporting.historyError\",\n            defaultMessage: \"An error occurred while loading the history.\"\n          })\n        });\n      }\n\n      historyItems = historyItems || []; // Refresh history logs\n\n      Object.keys(expandedRows).forEach(historyId => {\n        const historyItem = historyItems.find(item => item.id === historyId);\n\n        if (historyItem) {\n          this.showDetails(historyItem);\n        } else {\n          this.hideDetails(historyId);\n        }\n      });\n      this.setState({\n        refreshing: false,\n        historyItems\n      });\n    });\n\n    _defineProperty(this, \"open\", async taskId => {\n      if (!taskId || !_reporting.capabilities.show) {\n        return;\n      }\n\n      this.setState({\n        taskId,\n        historyItems: [],\n        isFlyoutVisible: true\n      }, this.refresh);\n    });\n\n    _defineProperty(this, \"close\", () => {\n      this.setState({\n        isFlyoutVisible: false\n      });\n    });\n\n    _defineProperty(this, \"onTableChange\", ({\n      page = {}\n    }) => {\n      const {\n        index: pageIndex,\n        size: pageSize\n      } = page;\n      this.setState({\n        pageIndex,\n        pageSize\n      });\n    });\n\n    this.state = {\n      taskId: null,\n      refreshing: false,\n      isFlyoutVisible: false,\n      historyItems: [],\n      pageIndex: 0,\n      pageSize: 10,\n      expandedRows: {}\n    };\n    openFlyOutHandler = this.open;\n    closeFlyOutHandler = this.close;\n  }\n\n  render() {\n    const {\n      refreshing,\n      isFlyoutVisible,\n      historyItems,\n      expandedRows,\n      pageIndex,\n      pageSize\n    } = this.state;\n\n    if (!isFlyoutVisible) {\n      return /*#__PURE__*/_react.default.createElement(_react.Fragment, null);\n    }\n\n    const columns = [{\n      field: 'startTime',\n      name: _i18n.i18n.translate('ezReporting.date', {\n        defaultMessage: 'Date'\n      }),\n      sortable: true,\n      dataType: 'date',\n      align: 'left'\n    }, {\n      field: 'status',\n      name: _i18n.i18n.translate('ezReporting.status', {\n        defaultMessage: 'Status'\n      }),\n      sortable: true,\n      align: 'left',\n      width: '140px',\n      render: status => {\n        switch (status) {\n          case 'error':\n            return /*#__PURE__*/_react.default.createElement(_eui.EuiHealth, {\n              color: \"danger\"\n            }, _i18n.i18n.translate('ezReporting.error', {\n              defaultMessage: 'Error'\n            }));\n\n          case 'completed':\n            return /*#__PURE__*/_react.default.createElement(_eui.EuiHealth, {\n              color: \"success\"\n            }, _i18n.i18n.translate('ezReporting.completed', {\n              defaultMessage: 'Completed'\n            }));\n\n          case 'pending':\n            return /*#__PURE__*/_react.default.createElement(_eui.EuiHealth, {\n              color: \"primary\"\n            }, _i18n.i18n.translate('ezReporting.pending', {\n              defaultMessage: 'Pending'\n            }));\n\n          case 'ongoing':\n            return /*#__PURE__*/_react.default.createElement(_eui.EuiHealth, {\n              color: \"primary\"\n            }, _i18n.i18n.translate('ezReporting.ongoing', {\n              defaultMessage: 'Ongoing'\n            }));\n\n          default:\n            return /*#__PURE__*/_react.default.createElement(_eui.EuiHealth, {\n              color: \"subdued\"\n            }, _i18n.i18n.translate('ezReporting.unknown', {\n              defaultMessage: 'Unknown'\n            }));\n        }\n      }\n    }, {\n      field: 'executionTime',\n      name: _i18n.i18n.translate('ezReporting.executionTime', {\n        defaultMessage: 'Execution time'\n      }),\n      sortable: true,\n      align: 'right',\n      width: '140px',\n      render: executionTime => {\n        return (0, _reporting.ms2Str)(executionTime);\n      }\n    }, {\n      align: 'right',\n      width: '40px',\n      isExpander: true,\n      render: item => /*#__PURE__*/_react.default.createElement(_eui.EuiButtonIcon, {\n        onClick: () => this.toggleDetails(item),\n        \"aria-label\": expandedRows[item.id] ? 'Collapse' : 'Expand',\n        iconType: expandedRows[item.id] ? 'arrowUp' : 'arrowDown'\n      })\n    }];\n    const pagination = {\n      pageIndex,\n      pageSize,\n      totalItemCount: historyItems.length,\n      pageSizeOptions: [10, 20, 30],\n      hidePerPageOptions: false\n    };\n    const startIndex = pageIndex * pageSize;\n    const endIndex = Math.min(startIndex + pageSize, historyItems.length);\n    return /*#__PURE__*/_react.default.createElement(_eui.EuiFlyout, {\n      onClose: this.close,\n      size: \"m\",\n      \"aria-labelledby\": \"flyoutSmallTitle\"\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFlyoutHeader, {\n      hasBorder: true\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiTitle, {\n      size: \"m\"\n    }, /*#__PURE__*/_react.default.createElement(\"h2\", null, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n      id: \"ezReporting.history\",\n      defaultMessage: \"History\"\n    })))), /*#__PURE__*/_react.default.createElement(_eui.EuiFlyoutBody, null, /*#__PURE__*/_react.default.createElement(_eui.EuiBasicTable, {\n      items: historyItems.slice(startIndex, endIndex),\n      itemId: \"id\",\n      itemIdToExpandedRowMap: this.state.expandedRows,\n      isExpandable: true,\n      columns: columns,\n      pagination: pagination,\n      onChange: this.onTableChange\n    })), /*#__PURE__*/_react.default.createElement(_eui.EuiFlyoutFooter, null, /*#__PURE__*/_react.default.createElement(_eui.EuiFlexGroup, {\n      justifyContent: \"flexEnd\"\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiFlexItem, {\n      grow: false\n    }, /*#__PURE__*/_react.default.createElement(_eui.EuiButton, {\n      iconType: \"refresh\",\n      onClick: this.refresh,\n      isLoading: refreshing,\n      fill: true\n    }, /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n      id: \"ezReporting.refresh\",\n      defaultMessage: \"Refresh\"\n    }))))));\n  }\n\n}\n\nexports.EzreportingHistoryFlyout = EzreportingHistoryFlyout;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EzreportingTable = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _i18n = require(\"@kbn/i18n\");\n\nvar _react2 = require(\"@kbn/i18n/react\");\n\nvar _eui = require(\"@elastic/eui\");\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _edit = require(\"./flyout/edit\");\n\nvar _history = require(\"./flyout/history\");\n\nvar _reporting = require(\"../../lib/reporting\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass EzreportingTable extends _react.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"toggleDetails\", item => {\n      const itemIdToExpandedRowMap = { ...this.state.itemIdToExpandedRowMap\n      };\n\n      if (itemIdToExpandedRowMap[item._id]) {\n        delete itemIdToExpandedRowMap[item._id];\n        return this.setState({\n          itemIdToExpandedRowMap\n        });\n      }\n\n      const {\n        reporting\n      } = item;\n      const receivers = Array.isArray(reporting.emails) ? reporting.emails.join(', ') : reporting.emails;\n      const listItems = [{\n        title: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n          id: \"ezReporting.receiversEmails\",\n          defaultMessage: \"Receivers' email addresses\"\n        }),\n        description: receivers\n      }, {\n        title: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n          id: \"ezReporting.nextReport\",\n          defaultMessage: \"Next report\"\n        }),\n        description: reporting.runAt ? (0, _moment.default)(reporting.runAt).format('YYYY-MM-DD hh:mm') : 'N/A'\n      }, {\n        title: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n          id: \"ezReporting.createdAt\",\n          defaultMessage: \"Creation date\"\n        }),\n        description: reporting.createdAt ? (0, _moment.default)(reporting.createdAt).format('YYYY-MM-DD') : 'N/A'\n      }];\n      itemIdToExpandedRowMap[item._id] = /*#__PURE__*/_react.default.createElement(_eui.EuiDescriptionList, {\n        listItems: listItems\n      });\n      return this.setState({\n        itemIdToExpandedRowMap\n      });\n    });\n\n    _defineProperty(this, \"onTableChange\", ({\n      page = {}\n    }) => {\n      const {\n        index: pageIndex,\n        size: pageSize\n      } = page;\n      this.setState({\n        pageIndex,\n        pageSize\n      });\n    });\n\n    this.state = {\n      itemIdToExpandedRowMap: {},\n      pageIndex: 0,\n      pageSize: 10\n    };\n  }\n\n  render() {\n    const {\n      pageIndex,\n      pageSize,\n      itemIdToExpandedRowMap\n    } = this.state;\n    const {\n      tasks,\n      dashboards,\n      frequencies\n    } = this.props;\n    const actions = [];\n\n    if (_reporting.capabilities.edit) {\n      actions.push({\n        name: _i18n.i18n.translate('ezReporting.edit', {\n          defaultMessage: 'Edit'\n        }),\n        description: _i18n.i18n.translate('ezReporting.edit', {\n          defaultMessage: 'Edit'\n        }),\n        icon: 'pencil',\n        type: 'icon',\n        color: 'primary',\n        onClick: el => {\n          if (el.exists) {\n            return (0, _edit.openFlyOut)(el, true);\n          }\n\n          return _reporting.toasts.addDanger({\n            title: 'Error',\n            text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n              id: \"ezReporting.dashboardNotFound\",\n              values: {\n                DASHBOARD_ID: el.dashboardId\n              },\n              defaultMessage: \"Dashboard nof found or remove (id: {DASHBOARD_ID})\"\n            })\n          });\n        }\n      });\n    }\n\n    if (_reporting.capabilities.save) {\n      actions.push({\n        name: _i18n.i18n.translate('ezReporting.generate', {\n          defaultMessage: 'Generate'\n        }),\n        description: _i18n.i18n.translate('ezReporting.generate', {\n          defaultMessage: 'Generate'\n        }),\n        icon: 'importAction',\n        type: 'icon',\n        color: 'primary',\n        onClick: el => {\n          if (el.exists) {\n            return this.props.downloadReport(el._id).then(() => {\n              return _reporting.toasts.addInfo({\n                title: 'Information',\n                text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n                  id: \"ezReporting.generated\",\n                  defaultMessage: \"Your report will be sent to you by email\"\n                })\n              });\n            }).catch(() => {\n              return _reporting.toasts.addDanger({\n                title: 'Error',\n                text: /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n                  id: \"ezReporting.generationError\",\n                  defaultMessage: \"An error occurred while downloading report.\"\n                })\n              });\n            });\n          }\n        }\n      });\n    }\n\n    if (_reporting.capabilities.show) {\n      actions.push({\n        name: _i18n.i18n.translate('ezReporting.history', {\n          defaultMessage: 'History'\n        }),\n        description: _i18n.i18n.translate('ezReporting.history', {\n          defaultMessage: 'History'\n        }),\n        icon: 'clock',\n        type: 'icon',\n        color: 'primary',\n        onClick: el => {\n          if (el.exists) {\n            (0, _history.openFlyOut)(el._id, false);\n          }\n        }\n      });\n    }\n\n    if (_reporting.capabilities.delete) {\n      actions.push({\n        name: _i18n.i18n.translate('ezReporting.delete', {\n          defaultMessage: 'Delete'\n        }),\n        description: _i18n.i18n.translate('ezReporting.delete', {\n          defaultMessage: 'Delete'\n        }),\n        icon: 'trash',\n        type: 'icon',\n        color: 'danger',\n        onClick: el => {\n          this.props.removeTaskHandler(el);\n        }\n      });\n    }\n\n    const columns = [{\n      name: _i18n.i18n.translate('ezReporting.dashboard', {\n        defaultMessage: 'Dashboard'\n      }),\n      description: _i18n.i18n.translate('ezReporting.dashboardName', {\n        defaultMessage: 'Dashboard name'\n      }),\n      align: 'left',\n      render: ({\n        dashboardId,\n        reporting\n      }) => {\n        if (dashboardId) {\n          const dashboard = dashboards.find(({\n            id\n          }) => id === dashboardId);\n\n          if (dashboard) {\n            if (reporting.print) {\n              const content = /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n                id: \"ezReporting.optimizedForPrinting\",\n                defaultMessage: \"Optimized for printing\"\n              });\n\n              return /*#__PURE__*/_react.default.createElement(\"span\", null, /*#__PURE__*/_react.default.createElement(_eui.EuiLink, {\n                href: `kibana#/dashboard/${dashboardId}`\n              }, dashboard.name), \" \", ' ', /*#__PURE__*/_react.default.createElement(_eui.EuiToolTip, {\n                position: \"right\",\n                content: content\n              }, /*#__PURE__*/_react.default.createElement(_eui.EuiText, null, \"\\uD83D\\uDDB6\")));\n            }\n\n            return /*#__PURE__*/_react.default.createElement(_eui.EuiLink, {\n              href: `kibana#/dashboard/${dashboardId}`\n            }, dashboard.name);\n          }\n        }\n\n        return /*#__PURE__*/_react.default.createElement(_eui.EuiTextColor, {\n          color: \"warning\"\n        }, /*#__PURE__*/_react.default.createElement(_eui.EuiIcon, {\n          type: \"alert\"\n        }), /*#__PURE__*/_react.default.createElement(_react2.FormattedMessage, {\n          id: \"ezReporting.dashboardNotFound\",\n          values: {\n            DASHBOARD_ID: dashboardId\n          },\n          defaultMessage: \"Dashboard nof found or remove (id: {DASHBOARD_ID})\"\n        }));\n      }\n    }, {\n      name: _i18n.i18n.translate('ezReporting.frequency', {\n        defaultMessage: 'Frequency'\n      }),\n      description: _i18n.i18n.translate('ezReporting.frequency', {\n        defaultMessage: 'Frequency'\n      }),\n      render: ({\n        reporting\n      }) => (0, _reporting.convertFrequency)(frequencies, reporting.frequency),\n      align: 'center'\n    }, {\n      name: _i18n.i18n.translate('ezReporting.sentAt', {\n        defaultMessage: 'Last sent'\n      }),\n      description: _i18n.i18n.translate('ezReporting.sentAt', {\n        defaultMessage: 'Last sent'\n      }),\n      align: 'center',\n      render: ({\n        reporting\n      }) => {\n        if (reporting.sentAt && reporting.sentAt !== '1970-01-01T12:00:00.000Z') {\n          return (0, _moment.default)(reporting.sentAt).format('YYYY-MM-DD');\n        }\n\n        return '-';\n      }\n    }, {\n      actions,\n      align: 'right',\n      width: '32px'\n    }, {\n      align: 'right',\n      width: '40px',\n      isExpander: true,\n      render: item => /*#__PURE__*/_react.default.createElement(_eui.EuiButtonIcon, {\n        onClick: () => this.toggleDetails(item),\n        \"aria-label\": itemIdToExpandedRowMap[item._id] ? 'Collapse' : 'Expand',\n        iconType: itemIdToExpandedRowMap[item._id] ? 'arrowUp' : 'arrowDown'\n      })\n    }];\n    const pagination = {\n      pageIndex,\n      pageSize,\n      totalItemCount: tasks.length,\n      pageSizeOptions: [10, 20, 30],\n      hidePerPageOptions: false\n    };\n    const startIndex = pageIndex * pageSize;\n    const endIndex = Math.min(startIndex + pageSize, tasks.length);\n    return /*#__PURE__*/_react.default.createElement(_eui.EuiBasicTable, {\n      items: tasks.slice(startIndex, endIndex),\n      itemId: \"_id\",\n      itemIdToExpandedRowMap: itemIdToExpandedRowMap,\n      isExpandable: true,\n      hasActions: true,\n      columns: columns,\n      pagination: pagination,\n      onChange: this.onTableChange\n    });\n  }\n\n}\n\nexports.EzreportingTable = EzreportingTable;"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}